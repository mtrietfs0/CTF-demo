<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Level 4 - Final Challenge</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body{
  background:#020617;
  color:#f87171;
  font-family:Arial, sans-serif;
  text-align:center;
}
.box{
  border:2px solid #f87171;
  box-shadow:0 0 15px #f87171;
  padding:20px;
  border-radius:12px;
  width:350px;
  margin:100px auto;
  background-color: #0f172a; /* Th√™m n·ªÅn nh·∫π cho h·ªôp */
}
button{
  background:#22c55e;
  color: white;
  border:none;
  padding:10px 20px;
  border-radius:6px;
  cursor:pointer;
  font-weight: bold;
  transition: 0.3s;
}
button:hover { background: #16a34a; }

input{
  padding:10px;
  border-radius:6px;
  border:none;
  width:80%;
  text-align: center;
  outline: none;
}

/* Style cho QR Code */
#qrcode {
  display: flex;
  justify-content: center;
  margin-top: 20px;
  padding: 10px;
  background: white; 
  width: fit-content;
  margin-left: auto;
  margin-right: auto;
  border-radius: 8px;
  display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
}

/* Style cho d√≤ng ch·ªØ h∆∞·ªõng d·∫´n scan */
#scan-hint {
    display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
    color: #94a3b8;
    margin-top: 15px;
    font-size: 0.9em;
    font-style: italic;
    animation: blink 2s infinite;
}
@keyframes blink { 50% { opacity: 0.6; } }

#success-msg { display: none; }
</style>
</head>
<body>

<div class="box">
    <div id="game-content">
        <h2>üî¥ LEVEL 4 ‚Äì GI·∫¢I M√É</h2>
        <p>
        Th√¥ng ƒëi·ªáp ƒë√£ b·ªã m√£ h√≥a b·∫±ng m√£ Caesar d·ªãch ti·∫øn <b>5 ch·ªØ c√°i</b>:<br><br>
        <b style="font-size: 24px; letter-spacing: 5px; color: white;">XJHWJY</b><br><br>
        Bi·∫øt r·∫±ng: A ‚Üí F<br>
        H√£y gi·∫£i m√£ ƒë·ªÉ t√¨m ra t·ª´ g·ªëc.
        </p>

        <input type="text" id="answer" placeholder="Nh·∫≠p ƒë√°p √°n...">
        <br><br>
        <button onclick="check()">X√ÅC NH·∫¨N</button>
    </div>

    <div id="success-msg">
        <h1 style="color: #22c55e; margin-bottom: 5px;">üèÜ HO√ÄN TH√ÄNH!</h1>
        <p style="color: white; margin-top: 0;">B·∫°n ƒë√£ v∆∞·ª£t qua th·ª≠ th√°ch cu·ªëi c√πng!</p>
    </div>
    
    <div id="qrcode"></div>
    
    <p id="scan-hint">üì≤ Scan ƒë·ªÉ ti·∫øn t·ªõi ƒë·ªô kh√≥ ti·∫øp theo</p>
</div>

<script>
function check(){
    let user = document.getElementById("answer").value.toUpperCase().trim();
    // Link ƒë√≠ch c·ªßa QR Code
    const NEXT_URL = "https://mtrietfs0.github.io/CTF-demo/CTF12.html";
    
    if(user === "SECRET"){
        // 1. ·∫®n c√¢u h·ªèi
        document.getElementById("game-content").style.display = "none";
        
        // 2. Hi·ªán l·ªùi ch√∫c
        document.getElementById("success-msg").style.display = "block";
        
        // 3. Hi·ªán khung QR Code
        const qrContainer = document.getElementById("qrcode");
        qrContainer.style.display = "block";
        
        // 4. Hi·ªán d√≤ng ch·ªØ h∆∞·ªõng d·∫´n scan
        document.getElementById("scan-hint").style.display = "block";
        
        // 5. T·∫°o QR Code
        // X√≥a n·ªôi dung c≈© n·∫øu c√≥ ƒë·ªÉ tr√°nh t·∫°o tr√πng l·∫∑p
        qrContainer.innerHTML = ""; 
        new QRCode(qrContainer, {
            text: NEXT_URL,
            width: 150,
            height: 150,
            colorDark : "#000000",
            colorLight : "#ffffff",
            correctLevel : QRCode.CorrectLevel.H
        });

    } else {
        alert("‚ùå Sai m√£ r·ªìi! H√£y th·ª≠ d·ªãch ng∆∞·ª£c l·∫°i 5 k√Ω t·ª± xem sao?");
        document.getElementById("answer").value = "";
        document.getElementById("answer").focus();
    }
}
</script>
</body>
</html>
