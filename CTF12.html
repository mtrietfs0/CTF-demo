<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>CTF Zone - Simple Version</title>
    <style>
        body { background-color: #0d1117; color: #58a6ff; font-family: 'Courier New', monospace; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; border: 1px solid #30363d; padding: 20px; position: relative; }
        h1 { border-bottom: 1px solid #30363d; }
        .challenge { margin-top: 20px; background: #161b22; padding: 15px; border-radius: 6px; }
        input { background: #0d1117; border: 1px solid #30363d; color: white; padding: 5px; width: 60%; }
        
        /* Style cho tr·∫°ng th√°i ƒë√£ ho√†n th√†nh */
        input.solved { border-color: #3fb950; color: #3fb950; font-weight: bold; }
        input:disabled { background: #21262d; cursor: not-allowed; }
        
        button { background: #238636; color: white; border: none; padding: 5px 15px; cursor: pointer; }
        button:disabled { background: #8b949e; cursor: not-allowed; }
        
        .result { margin-top: 10px; font-weight: bold; }
        .correct { color: #3fb950; }
        .wrong { color: #f85149; }
        
        .next-level-btn {
            display: inline-block; margin-top: 30px; padding: 15px 30px;
            background: #1f6feb; color: white; text-decoration: none; font-weight: bold; border-radius: 5px;
        }
        
        .reset-btn {
            position: absolute; top: 20px; right: 20px;
            background: #da3633; font-size: 0.8em; padding: 5px 10px; border-radius: 4px; color: white; border: none; cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <button onclick="resetGame()" class="reset-btn">üîÑ Reset Game</button>
        <h1>üö© CTF TRAINING - PART 1</h1>

        <div class="challenge">
            <h3>Level 1: URL ·∫©n gi·∫•u</h3>
            <p>Flag n·∫±m ngay tr√™n thanh ƒë·ªãa ch·ªâ tr√¨nh duy·ªát.</p>
            <input type="text" id="ans1" placeholder="Nh·∫≠p Flag 1...">
            <button id="btn1" onclick="check(1)">Ki·ªÉm tra</button>
            <div id="res1" class="result"></div>
        </div>

        <div class="challenge">
            <h3>Level 2: Source Code</h3>
            <p>View Source (F12) ƒë·ªÉ t√¨m ƒëi·ªÅu b·∫•t th∆∞·ªùng.</p>
            <input type="text" id="ans2" placeholder="Nh·∫≠p Flag 2...">
            <button id="btn2" onclick="check(2)">Ki·ªÉm tra</button>
            <div id="res2" class="result"></div>
        </div>

        <a href="level3.html" class="next-level-btn">üëâ CHUY·ªÇN SANG LEVEL 3</a>
    </div>

    <script>
        // C·∫§U H√åNH ƒê√ÅP √ÅN (D·∫°ng vƒÉn b·∫£n th∆∞·ªùng - Plaintext)
        const answers = {
            1: "CTF{nhin_len_thanh_url_ki}",
            2: "CTF{html_source_code_is_fun}"
        };

        window.onload = function() {
            // Logic t·ª± ƒë·ªông th√™m Flag v√†o URL cho C√¢u 1
            const urlParams = new URLSearchParams(window.location.search);
            if (!urlParams.has('token')) {
                var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?token=CTF{nhin_len_thanh_url_ki}';
                window.history.pushState({path:newurl},'',newurl);
            }

            // T·∫£i l·∫°i ti·∫øn ƒë·ªô ng∆∞·ªùi ch∆°i ƒë√£ l∆∞u
            loadProgress();
        };

        function check(level) {
            // L·∫•y d·ªØ li·ªáu ng∆∞·ªùi d√πng nh·∫≠p
            let input = document.getElementById('ans'+level).value.trim();
            let resBox = document.getElementById('res'+level);
            
            // So s√°nh tr·ª±c ti·∫øp v·ªõi ƒë√°p √°n trong bi·∫øn 'answers'
            if (input === answers[level]) {
                markSolved(level); // N·∫øu ƒë√∫ng, l∆∞u v√† c·∫≠p nh·∫≠t giao di·ªán
            } else {
                resBox.innerHTML = "Sai r·ªìi! ‚ùå";
                resBox.className = "result wrong";
            }
        }

        // --- C√ÅC H√ÄM H·ªñ TR·ª¢ L∆ØU TR·ªÆ (GI·ªÆ NGUY√äN) ---

        function markSolved(level) {
            // 1. L∆∞u v√†o LocalStorage
            localStorage.setItem('ctf_level_' + level, 'solved');
            // 2. C·∫≠p nh·∫≠t giao di·ªán
            updateUI(level);
        }

        function updateUI(level) {
            let input = document.getElementById('ans' + level);
            let btn = document.getElementById('btn' + level);
            let resBox = document.getElementById('res' + level);

            // Hi·ªán ƒë√°p √°n ra lu√¥n cho ng∆∞·ªùi d√πng th·∫•y
            input.value = answers[level]; 
            input.classList.add('solved');
            input.disabled = true;
            
            btn.innerText = "ƒê√£ xong";
            btn.disabled = true;
            
            resBox.innerHTML = "Ch√≠nh x√°c! ‚úÖ";
            resBox.className = "result correct";
        }

        function loadProgress() {
            // Ki·ªÉm tra xem level 1 v√† 2 ƒë√£ gi·∫£i ch∆∞a
            for (let i = 1; i <= 2; i++) {
                if (localStorage.getItem('ctf_level_' + i) === 'solved') {
                    updateUI(i);
                }
            }
        }

        function resetGame() {
            if(confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô ti·∫øn ƒë·ªô ch∆°i kh√¥ng?")) {
                localStorage.clear(); // X√≥a s·∫°ch b·ªô nh·ªõ
                location.reload();    // T·∫£i l·∫°i trang
            }
        }
    </script>
</body>
</html>